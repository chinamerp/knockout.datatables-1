(function(n,t){t.gridModel=function(n){function r(){console.log("Request "+i.pageSize()+"rows");n(i).done(function(n,t){i.totalRows(t);i.items(n)})}function c(){for(var t=["page","pageSize","sortField","sortOrder"],n=0,u=t.length;n<u;n++)i[t[n]].subscribe(r)}var u=t.observable(1),f=t.observable(20).extend({throttle:0}),e=t.observable().extend({throttle:0}),o=t.observable("ASC").extend({throttle:0}),s=t.observable(),h=t.observableArray(),i={page:u,pageSize:f,sortField:e,sortOrder:o,totalRows:s,items:h};return c(),r(),i};t.gridModel.inMemory=function(i){return t.gridModel(function(r){var u=n.Deferred();return setTimeout(function(){var s=parseInt(r.pageSize()*(r.page()-1)),h=parseInt(r.pageSize()*r.page()),e=[],f=r.sortField(),o=r.sortOrder()==="asc"?-1:1,n;for(i.sort(function(n,i){return t.unwrap(n[f])<t.unwrap(i[f])?o:t.unwrap(n[f])>t.unwrap(i[f])?-o:0}),n=s;n<h&&n<i.length;n++)e.push(i[n]);u.resolve(e,i.length)},0),u})};t.dtColumn=function(n,t){function r(n,t){return t==="display"?i.name||"$data":t==="filter"||t==="sort"?i.name:t==="set"?void 0:function(){return n[i.name]||n}}function u(n,t){return function(){return n||'<td data-bind="text: '+(t||"$data")+'"><\/td>'}}var i;return i=arguments.length===2||arguments.length===1&&typeof n=="string"?{name:n,displayName:t}:n,{data:r,render:u(i.template,i.name),title:i.displayName||i.name,sortable:!!i.name}};t.bindingHandlers.datatables={init:function(i,r,u,f,e){function h(r){var u=n("<tr>"),f,e;t.utils.arrayForEach(r,function(n){u.append(n.render())});f=u[0].childNodes;e=t.utils.moveCleanedNodesToContainerElement(f);new t.templateSources.anonymousTemplate(i).nodes(e)}function c(n){return n.dom?n.dom:(n.allowColumnReorder===!0?"R":"")+"ti"+(n.virtualScrolling===!0?"S":"p")}function l(t){if(t.scrollY)if(typeof t.scrollY=="function"){var r=function(){var r=n(i).parent();r.length>0&&r.height(n.proxy(t.scrollY,r)())};n(window).resize(r);setTimeout(function(){n(i).dataTable()._fnAdjustColumnSizing(!0);r()},100);try{return t.scrollY()||500}catch(u){return 500}}else return t.scrollY}var o=r(),s={columnDefs:n.each(o.columns,function(n,t){t.targets=[n]}),displayLength:o.datasource.pageSize(),displayStart:o.datasource.pageSize()*(o.datasource.page()-1),serverSide:!0,dom:c(o),deferRender:o.deferRender||o.virtualScrolling,scrollY:l(o)};h(s.columnDefs);s.serverData=function(n,t){var r=t.start,i=t.length,u=r/i+1,f=o.columns[t.order[0].column].data(undefined,"sort"),e=t.order[0].dir;o.datasource.page(u);o.datasource.pageSize(i);o.datasource.sortField(f);o.datasource.sortOrder(e)};s.rowCallback=function(r,u,f){var h=e.createChildContext(t.unwrap(u),s.as);return h.$index=t.observable(f),t.renderTemplate(o.rowTemplate||i,h,{},r,"replaceChildren"),o.rowCallback&&o.rowCallback(r,u),t.isObservable(o.selectedRow)&&n(r).click(function(){o.selectedRow(u)}),r};o.group&&(s.drawCallback=function(){var i=this.api(),u=i.rows({page:"current"}).nodes(),r=null;i.data().each(function(f,e){var s=t.unwrap(f[o.group]),h;r!==s&&(h='<span class="glyphicon glyphicon-chevron-up"><\/span>',n(u).eq(e).before('<tr class="group"><td colspan="'+i.columns().data().length+'">'+h+s+"<\/td><\/tr>"),r=s)})});n(i).dataTable(s);o.datasource.items.subscribe(function(r){var u=n(i).dataTable(),e=u.api(),f=e.rows().nodes();f.length&&t.utils.arrayForEach(f,function(n){t.cleanNode(n)});u._fnAjaxUpdateDraw({aaData:r,iTotalRecords:o.datasource.totalRows(),iTotalDisplayRecords:o.datasource.totalRows()})})}}})(window.$,window.ko);
/*
//# sourceMappingURL=knockout.datatables.min.js.map
*/